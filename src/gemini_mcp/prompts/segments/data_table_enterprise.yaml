---
metadata:
  name: data_table_enterprise
  version: "1.0.0"
  description: "AG Grid style enterprise data table with keyboard navigation and batch actions"
  author: "Gemini MCP Team"
  tags:
    - segment
    - enterprise
    - dashboard
    - data-table
    - component

applies_to:
  - architect
  - physicist

priority: high

content: |
  ## ENTERPRISE DATA TABLE - AG GRID STYLE

  Enterprise data tables must support high data density, keyboard navigation,
  and batch operations. Follow AG Grid / SAP Fiori patterns.

  ### REQUIRED FEATURES

  1. **Bulk Actions Toolbar** - Selection-aware actions
  2. **Column Headers** - Sorting, filtering, resizing
  3. **Row Selection** - Checkbox-based multi-select
  4. **Keyboard Navigation** - Full arrow key support
  5. **Virtual Scrolling** - For large datasets (>100 rows)
  6. **Inline Editing** - Double-click to edit
  7. **Row Actions** - Context menu on right-click or hover

  ### TABLE STRUCTURE

  ```html
  <div class="border border-slate-200 rounded-lg overflow-hidden" role="grid">
    <!-- TOOLBAR -->
    <div class="flex items-center justify-between px-4 py-2 bg-slate-50 border-b border-slate-200">
      <div class="flex items-center gap-2">
        <span class="text-sm font-medium text-slate-700">Orders</span>
        <span class="text-xs text-slate-400">(1,247 items)</span>
      </div>
      <div class="flex items-center gap-2">
        <!-- Search -->
        <div class="relative">
          <input type="text" placeholder="Search..."
                 class="pl-8 pr-3 py-1.5 text-sm border border-slate-200 rounded-md
                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-48">
          <svg class="absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400">
            <!-- search icon -->
          </svg>
        </div>
        <!-- Column Toggle -->
        <button class="p-1.5 hover:bg-slate-100 rounded" title="Column Settings">
          <svg class="w-4 h-4 text-slate-500"><!-- columns icon --></svg>
        </button>
        <!-- Export -->
        <button class="p-1.5 hover:bg-slate-100 rounded" title="Export">
          <svg class="w-4 h-4 text-slate-500"><!-- download icon --></svg>
        </button>
      </div>
    </div>

    <!-- BULK ACTIONS BAR (shown when rows selected) -->
    <div class="hidden flex items-center justify-between px-4 py-2 bg-blue-50 border-b border-blue-100"
         data-bulk-actions>
      <span class="text-sm text-blue-700 font-medium">3 items selected</span>
      <div class="flex items-center gap-2">
        <button class="px-3 py-1 text-sm text-blue-600 hover:bg-blue-100 rounded">
          Edit
        </button>
        <button class="px-3 py-1 text-sm text-blue-600 hover:bg-blue-100 rounded">
          Export
        </button>
        <button class="px-3 py-1 text-sm text-rose-600 hover:bg-rose-100 rounded">
          Delete
        </button>
      </div>
    </div>

    <!-- TABLE -->
    <div class="overflow-x-auto">
      <table class="w-full" role="grid">
        <thead>
          <tr class="bg-slate-50 border-b border-slate-200" role="row">
            <!-- Select All -->
            <th class="w-10 px-4 py-3" role="columnheader">
              <input type="checkbox" class="w-4 h-4 rounded border-slate-300"
                     aria-label="Select all">
            </th>
            <!-- Sortable Columns -->
            <th class="px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider
                       cursor-pointer hover:bg-slate-100 select-none"
                role="columnheader" aria-sort="none" tabindex="0">
              <div class="flex items-center gap-1">
                Order ID
                <svg class="w-3 h-3 text-slate-400"><!-- sort icon --></svg>
              </div>
            </th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider
                       cursor-pointer hover:bg-slate-100"
                role="columnheader" aria-sort="ascending">
              <div class="flex items-center gap-1">
                Customer
                <svg class="w-3 h-3 text-blue-600"><!-- sort-asc icon --></svg>
              </div>
            </th>
            <th class="px-4 py-3 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider"
                role="columnheader">
              Amount
            </th>
            <th class="px-4 py-3 text-center text-xs font-semibold text-slate-600 uppercase tracking-wider"
                role="columnheader">
              Status
            </th>
            <th class="w-20 px-4 py-3" role="columnheader">
              <span class="sr-only">Actions</span>
            </th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
          <!-- Row -->
          <tr class="hover:bg-slate-50 focus-within:bg-blue-50" role="row" tabindex="0">
            <td class="px-4 py-3" role="gridcell">
              <input type="checkbox" class="w-4 h-4 rounded border-slate-300">
            </td>
            <td class="px-4 py-3 text-sm font-mono text-slate-900" role="gridcell">
              ORD-2024-1234
            </td>
            <td class="px-4 py-3" role="gridcell">
              <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center
                            text-xs font-medium text-slate-600">
                  JD
                </div>
                <div>
                  <div class="text-sm font-medium text-slate-900">John Doe</div>
                  <div class="text-xs text-slate-400">john@example.com</div>
                </div>
              </div>
            </td>
            <td class="px-4 py-3 text-sm text-right font-mono tabular-nums text-slate-900" role="gridcell">
              $1,234.56
            </td>
            <td class="px-4 py-3 text-center" role="gridcell">
              <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium
                           bg-emerald-50 text-emerald-700">
                Completed
              </span>
            </td>
            <td class="px-4 py-3 text-right" role="gridcell">
              <button class="p-1 hover:bg-slate-100 rounded opacity-0 group-hover:opacity-100
                             focus:opacity-100 transition-opacity">
                <svg class="w-4 h-4 text-slate-400"><!-- more icon --></svg>
              </button>
            </td>
          </tr>
          <!-- More rows... -->
        </tbody>
      </table>
    </div>

    <!-- PAGINATION -->
    <div class="flex items-center justify-between px-4 py-3 bg-slate-50 border-t border-slate-200">
      <div class="text-sm text-slate-500">
        Showing <span class="font-medium">1-25</span> of <span class="font-medium">1,247</span>
      </div>
      <div class="flex items-center gap-1">
        <button class="p-1.5 hover:bg-slate-100 rounded disabled:opacity-50" disabled>
          <svg class="w-4 h-4"><!-- chevron-left --></svg>
        </button>
        <button class="px-3 py-1 text-sm font-medium bg-blue-600 text-white rounded">1</button>
        <button class="px-3 py-1 text-sm text-slate-600 hover:bg-slate-100 rounded">2</button>
        <button class="px-3 py-1 text-sm text-slate-600 hover:bg-slate-100 rounded">3</button>
        <span class="px-2 text-slate-400">...</span>
        <button class="px-3 py-1 text-sm text-slate-600 hover:bg-slate-100 rounded">50</button>
        <button class="p-1.5 hover:bg-slate-100 rounded">
          <svg class="w-4 h-4"><!-- chevron-right --></svg>
        </button>
      </div>
    </div>
  </div>
  ```

  ### KEYBOARD SHORTCUTS

  | Key | Action |
  |-----|--------|
  | `Arrow Up/Down` | Navigate rows |
  | `Arrow Left/Right` | Navigate cells |
  | `Space` | Toggle row selection |
  | `Ctrl+A` | Select all rows |
  | `Enter` | Open row details / Start edit |
  | `Escape` | Cancel edit / Clear selection |
  | `Delete` | Delete selected rows (with confirmation) |
  | `Ctrl+C` | Copy selected rows |
  | `F2` | Start inline editing |

  ### ROW HEIGHT OPTIONS

  | Size | Height | Use Case |
  |------|--------|----------|
  | Compact | 32px | High density, power users |
  | Default | 40px | Standard usage |
  | Comfortable | 48px | Touch-friendly |

  ### STATUS BADGE COLORS

  | Status | Background | Text |
  |--------|------------|------|
  | Completed/Success | emerald-50 | emerald-700 |
  | Pending/In Progress | amber-50 | amber-700 |
  | Failed/Error | rose-50 | rose-700 |
  | Draft | slate-100 | slate-600 |
  | Cancelled | slate-100 | slate-400 |

  ### COLUMN ALIGNMENT RULES

  - **Text**: Left-aligned
  - **Numbers/Currency**: Right-aligned, tabular-nums
  - **Dates**: Left-aligned or center
  - **Status badges**: Center
  - **Actions**: Right-aligned
  - **Checkboxes**: Center

  ### ANTI-PATTERNS (FORBIDDEN)

  - ❌ No pagination (infinite scroll only for short lists)
  - ❌ No sorting indicators
  - ❌ Missing keyboard navigation
  - ❌ Hover-only actions without alternative access
  - ❌ Row height < 32px
  - ❌ Horizontal scroll on primary columns

  ### ACCESSIBILITY REQUIREMENTS

  - `role="grid"` on table container
  - `role="row"` on tr elements
  - `role="gridcell"` / `role="columnheader"` on cells
  - `aria-sort` on sortable columns
  - `tabindex="0"` on focusable rows
  - Skip links for bulk actions
  - Screen reader announcements for selection changes

  ### VIRTUAL SCROLLING

  For tables with >100 rows, implement virtual scrolling:
  - Only render visible rows + buffer
  - Maintain scroll position on data updates
  - Show loading skeleton for pending rows
  - Fixed header position during scroll
