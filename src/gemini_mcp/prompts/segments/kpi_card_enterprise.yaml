---
metadata:
  name: kpi_card_enterprise
  version: "1.0.0"
  description: "5-component enterprise KPI card anatomy for data-dense dashboards"
  author: "Gemini MCP Team"
  tags:
    - segment
    - enterprise
    - dashboard
    - kpi
    - component

applies_to:
  - architect
  - alchemist

priority: high

content: |
  ## ENTERPRISE KPI CARD - 5-COMPONENT ANATOMY

  Every KPI card MUST include these 5 components in this exact structure:

  ### ANATOMY DIAGRAM
  ```
  ┌─────────────────────────────────────────────────────┐
  │ [Icon] Metric Label                      [i] [⋮]   │  ← 1. HEADER
  │                                                     │
  │        $1,234,567                                   │  ← 2. PRIMARY VALUE
  │                                                     │
  │    ▲ +12.5%  vs last month                          │  ← 3. TREND INDICATOR
  │                                                     │
  │    ▁▂▃▄▅▆▇█▇▆▅▄▃ (12 weeks)                        │  ← 4. SPARKLINE
  │                                                     │
  │    Target: $1.5M  ████████░░ 82%                    │  ← 5. CONTEXT BAR
  └─────────────────────────────────────────────────────┘
  ```

  ### COMPONENT SPECIFICATIONS

  #### 1. HEADER (Required)
  - **Icon**: 16-20px, semantic color matching metric type
  - **Label**: 12-13px, text-slate-500, font-medium
  - **Info tooltip**: [i] icon on hover, explains metric definition
  - **Actions menu**: [⋮] kebab menu for drill-down, export, etc.

  ```html
  <div class="flex items-center justify-between">
    <div class="flex items-center gap-2">
      <svg class="w-5 h-5 text-blue-600">...</svg>
      <span class="text-sm font-medium text-slate-500">Revenue</span>
    </div>
    <div class="flex items-center gap-1">
      <button class="p-1 hover:bg-slate-100 rounded" title="More info">
        <svg class="w-4 h-4 text-slate-400">...</svg>
      </button>
      <button class="p-1 hover:bg-slate-100 rounded">
        <svg class="w-4 h-4 text-slate-400">...</svg>
      </button>
    </div>
  </div>
  ```

  #### 2. PRIMARY VALUE (Required)
  - **Font**: 24-32px, font-semibold, text-slate-900
  - **Number format**: `tabular-nums lining-nums` for aligned digits
  - **Currency/unit**: Appropriate formatting ($ prefix, % suffix, etc.)
  - **Abbreviation**: Use K, M, B for large numbers

  ```html
  <div class="mt-2">
    <span class="text-2xl font-semibold text-slate-900 tabular-nums">
      $1,234,567
    </span>
  </div>
  ```

  #### 3. TREND INDICATOR (Required)
  - **Direction arrow**: ▲ (up) or ▼ (down)
  - **Delta value**: Percentage or absolute change
  - **Comparison period**: "vs last month", "vs YoY", etc.
  - **Colors**:
    - Positive: emerald-500 (text), emerald-50 (bg)
    - Negative: rose-600 (text), rose-50 (bg)
    - Neutral: slate-400

  ```html
  <div class="flex items-center gap-2 mt-2">
    <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full
                 text-xs font-medium bg-emerald-50 text-emerald-600">
      <svg class="w-3 h-3"><!-- up arrow --></svg>
      +12.5%
    </span>
    <span class="text-xs text-slate-400">vs last month</span>
  </div>
  ```

  #### 4. SPARKLINE (Required for time-series KPIs)
  - **Data points**: 12-16 points (weekly or monthly)
  - **Height**: 32-48px
  - **Style**: Area fill with gradient, stroke line
  - **Color**: Match trend direction (emerald for up, rose for down)
  - **No axes**: Clean, minimal visualization

  ```html
  <div class="mt-3 h-10">
    <svg viewBox="0 0 100 32" class="w-full h-full" preserveAspectRatio="none">
      <defs>
        <linearGradient id="sparkline-fill" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="rgb(16, 185, 129)" stop-opacity="0.2"/>
          <stop offset="100%" stop-color="rgb(16, 185, 129)" stop-opacity="0"/>
        </linearGradient>
      </defs>
      <path d="M0,28 L8,24 L16,20 L24,22 L32,18 L40,14 L48,16 L56,12 L64,10 L72,8 L80,6 L88,8 L96,4 L100,4 L100,32 L0,32 Z"
            fill="url(#sparkline-fill)"/>
      <path d="M0,28 L8,24 L16,20 L24,22 L32,18 L40,14 L48,16 L56,12 L64,10 L72,8 L80,6 L88,8 L96,4"
            fill="none" stroke="rgb(16, 185, 129)" stroke-width="1.5"/>
    </svg>
  </div>
  ```

  #### 5. CONTEXT BAR (Required)
  - **Target label**: "Target:", "Goal:", "Budget:"
  - **Target value**: Formatted number
  - **Progress bar**: Visual completion percentage
  - **Percentage**: Current progress as percentage of target

  ```html
  <div class="mt-3 pt-3 border-t border-slate-100">
    <div class="flex items-center justify-between text-xs">
      <span class="text-slate-400">Target: $1.5M</span>
      <span class="font-medium text-slate-600">82%</span>
    </div>
    <div class="mt-1.5 h-1.5 bg-slate-100 rounded-full overflow-hidden">
      <div class="h-full bg-blue-600 rounded-full" style="width: 82%"></div>
    </div>
  </div>
  ```

  ### CARD CONTAINER STYLES

  ```html
  <div class="bg-white border border-slate-200 rounded-lg p-4
              hover:border-slate-300 hover:shadow-sm transition-all duration-150">
    <!-- 5 components here -->
  </div>
  ```

  ### ANTI-PATTERNS (FORBIDDEN)

  - ❌ Single-value-only cards (no context)
  - ❌ Missing trend indicators
  - ❌ Decorative icons without semantic meaning
  - ❌ Gradient backgrounds on KPI cards
  - ❌ border-radius > 12px
  - ❌ Shadows > 4px blur
  - ❌ Centered text alignment

  ### DATA DENSITY REQUIREMENTS

  - Minimum 4-6 KPI cards visible per row on desktop
  - Card width: 200-280px
  - Card height: 160-200px
  - Gap between cards: 12-16px

  ### ACCESSIBILITY

  - `role="article"` on card container
  - `aria-label` describing the metric and value
  - Color not sole indicator of trend (use arrows)
  - Minimum 4.5:1 contrast for text

  ### KPI TYPES AND ICONS

  | KPI Type | Icon | Primary Color |
  |----------|------|---------------|
  | Revenue | $ (dollar) | blue-600 |
  | Users | person | slate-600 |
  | Growth | trending-up | emerald-600 |
  | Conversion | percentage | amber-600 |
  | Performance | gauge | cyan-600 |
  | Alerts | bell | rose-600 |
